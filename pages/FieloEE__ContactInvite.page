<apex:page standardController="Contact" Extensions="FieloEE.ContactInviteExtension" recordSetVar="contacts">
    <apex:sectionHeader title="{!$ObjectType.Contact.LabelPlural}" subtitle="{!$Label.fieloee__invitecontacts}"/>
    <apex:pageBlock >
        <apex:form >
            <apex:pageBlockSection columns="1">
                <apex:outputText value="{!$Label.fieloee__convertcontactinfo}" rendered="{!!invited}"/>

                <apex:selectList value="{!programId}" multiselect="false" size="1" rendered="{!!invited}">
                    <apex:selectOptions value="{!programs}"/>
                </apex:selectList>
                
                <apex:commandButton value="{!$Label.fieloee__invitecontacts}" action="{!invite}" rendered="{!!invited}"/>
                <apex:commandButton value="{!$Label.fieloee__back}" action="{!goToContacts}" rendered="{!invited && !(contactErrorsId.size > 0 || !ISNULL(generalMessage))}"/>
    
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="1" rendered="{!contactErrorsId.size > 0 || !ISNULL(generalMessage)}">
                <apex:outputText value="{!generalMessage}" rendered="{!!ISNULL(generalMessage) && contactErrorsId.size < 1}" />
                <apex:outputText value="{!$Label.fieloee__invitecontacterrors}" rendered="{!contactErrorsId.size > 0}" />
                <apex:repeat value="{!contactErrorsId}" var="contactId" >
                    <apex:outputText value="{!results[contactId]}"/>
                </apex:repeat>
                <apex:commandButton value="{!$Label.fieloee__back}" action="{!goToContacts}" rendered="{!invited}"/>
            </apex:pageBlockSection>
        </apex:form>
    </apex:pageBlock>
</apex:page>